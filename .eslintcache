[{"D:\\projects\\andrew\\flights\\flights_front\\src\\index.js":"1","D:\\projects\\andrew\\flights\\flights_front\\src\\contexts\\AppStateContext.js":"2","D:\\projects\\andrew\\flights\\flights_front\\src\\styles\\globalStyles.js":"3","D:\\projects\\andrew\\flights\\flights_front\\src\\const\\index.js":"4","D:\\projects\\andrew\\flights\\flights_front\\src\\api\\index.js":"5","D:\\projects\\andrew\\flights\\flights_front\\src\\api\\apiService.js":"6","D:\\projects\\andrew\\flights\\flights_front\\src\\styles\\formStyles.js":"7","D:\\projects\\andrew\\flights\\flights_front\\src\\const\\flights.js":"8","D:\\projects\\andrew\\flights\\flights_front\\src\\env\\index.js":"9","D:\\projects\\andrew\\flights\\flights_front\\src\\modules\\Exceptions.js":"10","D:\\projects\\andrew\\flights\\flights_front\\src\\utilities\\updateNestedProperty.js":"11","D:\\projects\\andrew\\flights\\flights_front\\src\\utilities\\printContent.js":"12","D:\\projects\\andrew\\flights\\flights_front\\src\\components\\form\\formParts.js":"13","D:\\projects\\andrew\\flights\\flights_front\\src\\styles\\pageStyles.js":"14","D:\\projects\\andrew\\flights\\flights_front\\src\\env\\storedEnv.js":"15","D:\\projects\\andrew\\flights\\flights_front\\src\\components\\form\\Input.js":"16","D:\\projects\\andrew\\flights\\flights_front\\src\\components\\form\\SelectInput.js":"17","D:\\projects\\andrew\\flights\\flights_front\\src\\utilities\\index.js":"18","D:\\projects\\andrew\\flights\\flights_front\\src\\components\\icons.js":"19","D:\\projects\\andrew\\flights\\flights_front\\src\\routes\\GoodsRoute\\GoodsRoute.jsx":"20","D:\\projects\\andrew\\flights\\flights_front\\src\\routes\\HomeRoute\\HomeRoute.jsx":"21","D:\\projects\\andrew\\flights\\flights_front\\src\\routes\\FlightsRoute\\FlightsRoute.jsx":"22","D:\\projects\\andrew\\flights\\flights_front\\src\\routes\\FlightsRoute\\EditFlightRoute\\index.js":"23","D:\\projects\\andrew\\flights\\flights_front\\src\\routes\\FlightsRoute\\EditFlightRoute\\CertificateFlightState.js":"24","D:\\projects\\andrew\\flights\\flights_front\\src\\App.jsx":"25","D:\\projects\\andrew\\flights\\flights_front\\src\\routes\\FlightsRoute\\ActivateFlightRoute\\ActivateFlightRoute.jsx":"26"},{"size":411,"mtime":1609183048359,"results":"27","hashOfConfig":"28"},{"size":1573,"mtime":1609183048355,"results":"29","hashOfConfig":"28"},{"size":473,"mtime":1609183048371,"results":"30","hashOfConfig":"28"},{"size":575,"mtime":1609183048354,"results":"31","hashOfConfig":"28"},{"size":545,"mtime":1609183048345,"results":"32","hashOfConfig":"28"},{"size":1521,"mtime":1609183048344,"results":"33","hashOfConfig":"28"},{"size":1225,"mtime":1609183048370,"results":"34","hashOfConfig":"28"},{"size":2053,"mtime":1609183048353,"results":"35","hashOfConfig":"28"},{"size":104,"mtime":1609183048357,"results":"36","hashOfConfig":"28"},{"size":118,"mtime":1609183048361,"results":"37","hashOfConfig":"28"},{"size":569,"mtime":1609183048373,"results":"38","hashOfConfig":"28"},{"size":491,"mtime":1609183048373,"results":"39","hashOfConfig":"28"},{"size":5326,"mtime":1609183048348,"results":"40","hashOfConfig":"28"},{"size":122,"mtime":1609183048371,"results":"41","hashOfConfig":"28"},{"size":93,"mtime":1609183048358,"results":"42","hashOfConfig":"28"},{"size":1039,"mtime":1609183048346,"results":"43","hashOfConfig":"28"},{"size":425,"mtime":1609183048347,"results":"44","hashOfConfig":"28"},{"size":173,"mtime":1609183048372,"results":"45","hashOfConfig":"28"},{"size":310,"mtime":1609183048351,"results":"46","hashOfConfig":"28"},{"size":94,"mtime":1609246816099,"results":"47","hashOfConfig":"28"},{"size":92,"mtime":1609246816101,"results":"48","hashOfConfig":"28"},{"size":1009,"mtime":1609247168556,"results":"49","hashOfConfig":"28"},{"size":4422,"mtime":1609183048367,"results":"50","hashOfConfig":"28"},{"size":2135,"mtime":1609183048366,"results":"51","hashOfConfig":"28"},{"size":941,"mtime":1609246721029,"results":"52","hashOfConfig":"28"},{"size":134,"mtime":1609247081024,"results":"53","hashOfConfig":"28"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},"1d4nu8e",{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"79","usedDeprecatedRules":"56"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"94"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"103","usedDeprecatedRules":"56"},{"filePath":"104","messages":"105","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"108","messages":"109","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\projects\\andrew\\flights\\flights_front\\src\\index.js",[],["110","111"],"D:\\projects\\andrew\\flights\\flights_front\\src\\contexts\\AppStateContext.js",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\styles\\globalStyles.js",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\const\\index.js",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\api\\index.js",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\api\\apiService.js",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\styles\\formStyles.js",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\const\\flights.js",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\env\\index.js",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\modules\\Exceptions.js",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\utilities\\updateNestedProperty.js",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\utilities\\printContent.js",["112"],"\r\n// https://stackoverflow.com/a/19155629\r\nexport const printContent = content => {\r\n\r\n  const newIframe = document.createElement('iframe');\r\n  newIframe.width = '0';\r\n  newIframe.height = '0';\r\n  newIframe.src = 'about:blank';\r\n  document.body.appendChild(newIframe);\r\n\r\n  newIframe.contentWindow.contents = content;\r\n  newIframe.src = 'javascript:window[\"contents\"]';\r\n\r\n  newIframe.focus();\r\n  newIframe.onload = function() {\r\n    newIframe.contentWindow.print();\r\n  };\r\n  return;\r\n\r\n};\r\n","D:\\projects\\andrew\\flights\\flights_front\\src\\components\\form\\formParts.js",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\styles\\pageStyles.js",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\env\\storedEnv.js",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\components\\form\\Input.js",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\components\\form\\SelectInput.js",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\utilities\\index.js",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\components\\icons.js",[],["113","114"],"D:\\projects\\andrew\\flights\\flights_front\\src\\routes\\GoodsRoute\\GoodsRoute.jsx",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\routes\\HomeRoute\\HomeRoute.jsx",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\routes\\FlightsRoute\\FlightsRoute.jsx",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\routes\\FlightsRoute\\EditFlightRoute\\index.js",["115","116","117","118","119","120","121","122"],"import React, {useState, useContext, useEffect} from \"react\";\r\nimport {useParams} from \"react-router-dom\";\r\nimport {FlightForm, HorizontalSeparator} from \"../../../styles/formStyles\";\r\nimport { AppStateContextStore } from '../../../contexts/AppStateContext';\r\nimport {\r\n  CommentControl,\r\n  FlightDateControl,\r\n  FlightLengthControl, LabelControl,\r\n  PersonNameControl,\r\n  SubmitControl\r\n} from \"../../../components/form/formParts\";\r\nimport {mExceptions} from \"../../../modules/Exceptions\";\r\nimport {printContent} from \"../../../utilities/printContent\";\r\nimport {\r\n  generateFlight,\r\n  flightOptions,\r\n  editModes,\r\n  newEntityId,\r\n  generateEditFlightUiState,\r\n  flightStates, flightMinutePrice\r\n} from \"../../../const/flights\";\r\nimport {updateNestedStateProperty} from \"../../../utilities/updateNestedProperty\";\r\nimport {CertificateFlightSubForm} from \"./CertificateFlightState\";\r\n\r\nconst preSetFlightHook = (flight) => {\r\n  let optionsTime = 0;\r\n  let optionsPrice = 0;\r\n  Object.keys(flight.options)\r\n    .forEach(optionKey => {\r\n      if (flight.options[optionKey]) {\r\n        optionsTime  += flightOptions[optionKey].time;\r\n        optionsPrice += flightOptions[optionKey].price;\r\n      }\r\n    });\r\n\r\n  flight.time.options   = optionsTime;\r\n  flight.time.total     = flight.time.basic + flight.time.options;\r\n\r\n  flight.price.options  = optionsPrice;\r\n  flight.price.basic    = flight.time.basic * flightMinutePrice;\r\n  flight.price.total    = flight.price.basic + flight.price.options;\r\n  flight.price.discount = flight.price.total / 100 * flight.price.discountPercent;\r\n  flight.price.final    = flight.price.total - flight.price.discount;\r\n};\r\n\r\n\r\n\r\nexport const EditFlightRoute = () => {\r\n\r\n  // Get certificate id = newEntityId / existing\r\n  const { flightId } = useParams();\r\n  const [ uiState, setUiState ] = useState(generateEditFlightUiState({ editMode: null }));\r\n  const [ flight, setFlight   ] = useState({});\r\n  const [ partnerOptions, setPartnerOptions   ] = useState([]);\r\n\r\n  const updateFlightProperty = (path, newValue) =>\r\n    updateNestedStateProperty(path, newValue, flight, setFlight, preSetFlightHook);\r\n\r\n  const updateUiProperty = (path, newValue) =>\r\n    updateNestedStateProperty(path, newValue, uiState, setUiState);\r\n\r\n  const { api } = useContext(AppStateContextStore);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      updateUiProperty('loading', true);\r\n      const partnerOptionsResult = await api.listPartners();\r\n      if (mExceptions.isAny(partnerOptionsResult)) {\r\n        updateUiProperty('failed', partnerOptionsResult.key);\r\n        return;\r\n      }\r\n      setPartnerOptions(partnerOptionsResult.data.partners);\r\n\r\n      if (flightId === newEntityId) {\r\n        const newFlight = generateFlight({  });\r\n        preSetFlightHook(newFlight);\r\n        setFlight(newFlight);\r\n      } else {\r\n          const existingFlight = await api.getFlight(flightId);\r\n          if (mExceptions.isAny(existingFlight)) {\r\n            updateUiProperty('failed', existingFlight.key);\r\n            return;\r\n          }\r\n          setFlight(existingFlight.data);\r\n      }\r\n      updateUiProperty('loading', false);\r\n    })();\r\n  }, []);\r\n\r\n\r\n  const onSubmit = async () => {\r\n    updateUiProperty('loading', true);\r\n    const result = await api.editFlight(flight);\r\n    console.log('=>', result);\r\n    updateUiProperty('loading', false);\r\n    if (mExceptions.isAny(result)) {\r\n      updateUiProperty('failed', result.key);\r\n      return;\r\n    }\r\n    setFlight(result.data);\r\n    updateUiProperty('saved', true);\r\n    // print(result.data.certificateId);\r\n  };\r\n\r\n  // const print = (certificateId) => {\r\n  //   // Set up custom markup here:\r\n  //   printContent(certificateId);\r\n  // };\r\n\r\n  if (uiState.loading) {\r\n    return <div>Загрузка</div>;\r\n  }\r\n\r\n  if (uiState.failed) {\r\n    return <div>Ошибка: {uiState.failed}</div>;\r\n  }\r\n\r\n  return (\r\n    <FlightForm>\r\n\r\n      <CertificateFlightSubForm { ...{flight, updateFlightProperty, partnerOptions} } />\r\n\r\n      <HorizontalSeparator />\r\n\r\n      { !uiState.saved && <SubmitControl label='Сохранить' onSubmit={onSubmit} /> }\r\n      { uiState.saved && (\r\n        <>\r\n          <LabelControl label='Идентификатор нового сертификата' value={flight.certificateId} />\r\n          <SubmitControl label='Печатать' onSubmit={()=>{}} />\r\n        </>\r\n      ) }\r\n\r\n    </FlightForm>\r\n  );\r\n};\r\n","D:\\projects\\andrew\\flights\\flights_front\\src\\routes\\FlightsRoute\\EditFlightRoute\\CertificateFlightState.js",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\App.jsx",[],"D:\\projects\\andrew\\flights\\flights_front\\src\\routes\\FlightsRoute\\ActivateFlightRoute\\ActivateFlightRoute.jsx",[],{"ruleId":"123","replacedBy":"124"},{"ruleId":"125","replacedBy":"126"},{"ruleId":"127","severity":1,"message":"128","line":12,"column":19,"nodeType":"129","messageId":"130","endLine":12,"endColumn":50},{"ruleId":"123","replacedBy":"131"},{"ruleId":"125","replacedBy":"132"},{"ruleId":"133","severity":1,"message":"134","line":6,"column":3,"nodeType":"135","messageId":"136","endLine":6,"endColumn":17},{"ruleId":"133","severity":1,"message":"137","line":7,"column":3,"nodeType":"135","messageId":"136","endLine":7,"endColumn":20},{"ruleId":"133","severity":1,"message":"138","line":8,"column":3,"nodeType":"135","messageId":"136","endLine":8,"endColumn":22},{"ruleId":"133","severity":1,"message":"139","line":9,"column":3,"nodeType":"135","messageId":"136","endLine":9,"endColumn":20},{"ruleId":"133","severity":1,"message":"140","line":13,"column":9,"nodeType":"135","messageId":"136","endLine":13,"endColumn":21},{"ruleId":"133","severity":1,"message":"141","line":17,"column":3,"nodeType":"135","messageId":"136","endLine":17,"endColumn":12},{"ruleId":"133","severity":1,"message":"142","line":20,"column":3,"nodeType":"135","messageId":"136","endLine":20,"endColumn":15},{"ruleId":"143","severity":1,"message":"144","line":88,"column":6,"nodeType":"145","endLine":88,"endColumn":8,"suggestions":"146"},"no-native-reassign",["147"],"no-negated-in-lhs",["148"],"no-script-url","Script URL is a form of eval.","Literal","unexpectedScriptURL",["147"],["148"],"no-unused-vars","'CommentControl' is defined but never used.","Identifier","unusedVar","'FlightDateControl' is defined but never used.","'FlightLengthControl' is defined but never used.","'PersonNameControl' is defined but never used.","'printContent' is defined but never used.","'editModes' is defined but never used.","'flightStates' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'api', 'flightId', and 'updateUiProperty'. Either include them or remove the dependency array.","ArrayExpression",["149"],"no-global-assign","no-unsafe-negation",{"desc":"150","fix":"151"},"Update the dependencies array to be: [api, flightId, updateUiProperty]",{"range":"152","text":"153"},[3157,3159],"[api, flightId, updateUiProperty]"]